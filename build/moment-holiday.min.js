//! moment-holiday.js
//! version : 1.5.1
//! author : Kodie Grantham
//! license : MIT
//! https://github.com/kodie/moment-holiday
(function(){var e,t="undefined"==typeof require||null===require||require.amd?this.moment:require("moment"),r=[],n=function(n,i,a){for(var o,s=[],h=0;h<r.length;h++){var l=r[h](n,i);(l||!1===l)&&(o=l)}if(!1===o)return!1;if("string"==typeof o?i=o:o&&(s=o),!t.isMoment(s)&&!s.length&&i.charAt(0).match(/[0-9(]/)){var f=!1,u=i.split("|");u.length>1&&(f=!0),u.length>2&&(u=[u[0],u[1]]);for(h=0;h<u.length;h++){var y=t(n),c=u[h].split("/");if(1===c.length||2===c.length&&"("!==c[1].charAt(0)&&4===c[1].length){e=u[h],h=-1,u=[];for(var v=1;v<13;v++)u.push(v+"/"+e)}else if(c.length>2&&y.year(parseInt(c[2])),y.month(parseInt(c[0])-1),"("===c[1].charAt(0)){var g=c[1].slice(1,-1).split(","),p=parseInt(g[0]),O=parseInt(g[1]),b=t(y).startOf("month"),k=t(y).endOf("month").diff(b,"days")+1,w=[];if(g[1]&&"["===g[1].charAt(0)){var m=!0;(O=parseInt(g[1].slice(1,-1)))<0&&(m=!1,O=parseInt(g[1].slice(2,-1))),b=t(y).date(O);for(var j=0;j<7;j++){if(b.day()===p){s.push(t(b));break}m?b.add(1,"day"):b.subtract(1,"day")}continue}for(var _=0;_<k;_++)b.day()===p&&w.push(t(b)),b.add(1,"day");if(!O){s=s.concat(w);continue}y=O<0?w[w.length+O]:w[O-1],s.push(y)}else s.push(y.date(c[1]))}if(f&&s.length>1){var x=s[1].diff(s[0],"days");if(x>1){var P=t(s[0]);s=[s[0]];for(h=0;h<x;h++)P.add(1,"day"),s.push(t(P))}}}s=d(s);for(h=0;h<s.length;h++)t.isMoment(s[h])?(a&&(0===s[h].day()&&(s[h]=s[h].add(1,"day")),6===s[h].day()&&(s[h]=s[h].subtract(1,"day"))),s[h]=s[h].startOf("day")):delete s[h];return!!s.length&&(1===s.length?s[0]:s)},i=function(e,t){var r=[];t=d(t);for(var n=0;n<t.length;n++){var i=e.match(new RegExp(t[n],"gi"));i&&(r=r.concat(i))}return r},a=function(e,r,a,o,s){var l={},f=[],d={};if(h=s||t.holidays.active,h.hasOwnProperty(r))f.push(r);else if(fk=u(r,h))f.push(fk);else{for(var y in h)if(h.hasOwnProperty(y)){if(l[y]=i(r,y.split(/[\s,.-]+/).filter(function(e){return e.length>2})).length,h[y].keywords_n)if(i(r,h[y].keywords_n).length){l[y]=0;continue}if(h[y].keywords_y){var c=i(r,h[y].keywords_y);if(!c||c.length!==h[y].keywords_y.length){l[y]=0;continue}l[y]+=c.length}if(h[y].keywords){var v=i(r,h[y].keywords);if(!v)continue;l[y]+=v.length}}for(var g in l)l[g]&&l.hasOwnProperty(g)&&(f.length&&l[g]!==l[f[0]]?l[g]>l[f[0]]&&(f=[g]):f.push(g))}if(!f.length)return!1;if(!1===o)return f;for(var p=0;p<f.length;p++){var O=n(e,h[f[p]].date,a);O&&(d[f[p]]=O)}return!!Object.keys(d).length&&d},o=function(e,r,n,i,o){var s=[];i&&(s={}),r=d(r),o||(o=t.holidays.active);for(var h=0;h<r.length;h++){var l=a(e,r[h],n,i,o);l&&(s=i?y(s,l):s.concat(l))}return s},s=function(r,i){var a=t.holidays.active,o={};for(var s in a)a.hasOwnProperty(s)&&(e=n(r,a[s].date,i))&&(o[s]=e);return o},l=function(e){if(regions=e.split("/"),e=regions[0].toLowerCase().replace(" ","_"),regions.shift(),!t.holidays[e])try{var r="./locale/";"build"==__dirname.split("/").slice(-1).pop()&&(r="."+r),require(r+e)}catch(e){}return!!t.holidays[e]&&(regions.length?function(e,r){var n=t.holidays[e],i={};if(n)for(var a=0;a<r.length;a++){var o=r[a].toLowerCase(),s=t.holidays[e+"/"+o];for(var h in s={},n)if(n.hasOwnProperty(h)){var l=n[h].regions||[],f=n[h].regions_n||[];l.length&&l.join().toLowerCase().split(),f.length&&f.join().toLowerCase().split(),(!l.length&&!f.length||l.length&&~l.indexOf(o)||f.length&&!~f.indexOf(o))&&(s[h]=n[h])}s&&(i=y(i,s))}return!!Object.keys(i).length&&i}(e,regions):t.holidays[e])},f=function(e,r,n,i){r||(r=1);for(var a=s(e,i),o=t(e),h=e.year(),l=[],f=0;f<r;f++)for(var u=t(o);;){var y=!1;if(n?u.add(1,"day"):u.subtract(1,"day"),u.year()!==h&&(a=s(u,i),h=u.year()),!Object.keys(a).length){y=!0;break}for(var c in a)if(a.hasOwnProperty(c)){for(var v=!1,g=d(a[c]),p=0;p<g.length;p++)if(u.isSame(g[p],"day")){l.push(g[p]),o=t(u),v=!0;break}if(v){y=!0;break}}if(y)break}return!!l.length&&(1===l.length?l[0]:l)},d=function(e){return e&&e.constructor!==Array?[e]:e},u=function(e,t){t.constructor===Object&&(t=Object.keys(t));for(var r=0;r<t.length;r++)if(e.toLowerCase()===t[r].toLowerCase())return t[r];return!1},y=function(e,t){return Object.assign({},e,t)};t.fn.holiday=function(r,n){t.holidays.active;var i={},o=!1;if(r){r.constructor!==Array&&(o=!0,r=[r]);for(var h=0;h<r.length;h++)(e=a(this,r[h],n))&&(i=Object.assign({},i,e))}else i=s(this,n);var l=Object.keys(i);return!!l.length&&(1===l.length&&o?i[l[0]]:i)},t.fn.holidays=function(e,t){return this.holiday(e,t)},t.fn.isHoliday=function(e,t){var r,n,i=[];if(e?(e=d(e),r=this.holiday(e,t),n=!1):(r=s(this,t),n=!0),!r)return!1;for(var a in r)if(r.hasOwnProperty(a))for(var o=d(r[a]),h=0;h<o.length;h++)if(this.isSame(o[h],"day")){if(!n)return!0;i.push(a)}return!!i.length&&(1===i.length?i[0]:i)},t.fn.previousHoliday=function(e,t){return f(this,e,!1,t)},t.fn.previousHolidays=function(e,t){return this.previousHoliday(e,t)},t.fn.nextHoliday=function(e,t){return f(this,e,!0,t)},t.fn.nextHolidays=function(e,t){return this.nextHoliday(e,t)},t.fn.holidaysBetween=function(e,r){e||(e=new Date),e=t(e).subtract(1,"day");for(var n=s(this,r),i=t(this),a=i.year(),o=[],h=0;h<e.diff(this,"days")&&(i.add(1,"day"),i.year()!==a&&(n=s(i,r),a=i.year()),Object.keys(n).length);h++)for(var l in n){for(var f=!1,u=d(n[l]),y=0;y<u.length;y++)if(i.isSame(u[y],"day")){o.push(u[y]),f=!0;break}if(f)break}return!!o.length&&o},t.holidays={active:{},active_last:{}},t.modifyHolidays={set:function(e,r){var n={};if(e.constructor===Array){for(var i=[],s=0;s<e.length;s++){var h=a(this,e[s],null,!1);h&&(i=i.concat(h))}if(i.length)for(var f in n=y(t.holidays.active))n.hasOwnProperty(f)&&(~i.indexOf(f)||delete n[f])}else if("string"==typeof e){var d=l(e);if(d)if(r){var u=o(this,r,!1,!1,d);for(s=0;s<u.length;s++)n[u[s]]=y(d[u[s]])}else n=y(d)}else n=e;return!Object.keys(n).length&&e!==n||Object.is(t.holidays.active,n)||(t.holidays.active_last=y(t.holidays.active),t.holidays.active=n),this},add:function(e,r){if("string"==typeof e){var n=l(e);if(e={},n)if(r)for(var i=o(this,r,!1,!1,n),a=0;a<i.length;a++)e[i[a]]=y(n[i[a]]);else e=n}return Object.keys(e).length&&(t.holidays.active_last=y(t.holidays.active),t.holidays.active=y(t.holidays.active,e)),this},remove:function(e){e=d(e);var r=o(this,e,!1,!1),n=y(t.holidays.active);if(r)for(var i=0;i<r.length;i++)delete n[r[i]];return Object.is(t.holidays.active,n)||(t.holidays.active_last=y(t.holidays.active),t.holidays.active=n),this},undo:function(){var e=y(t.holidays.active);return t.holidays.active=y(t.holidays.active_last),t.holidays.active_last=e,this},load:function(e){e=d(e);for(var t=0;t<e.length;t++)l(e[t]);return this},extendParser:function(e){return r.push(e),this}},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=t)}).call(this);
//# sourceMappingURL=moment-holiday.min.js.map
